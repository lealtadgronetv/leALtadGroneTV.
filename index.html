<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FUTBOLFREE</title>
    <style>
        body {
            background-color: #121212;
            color: #ffffff;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
        }
        
        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #ff0000;
            margin-bottom: 20px;
        }
        
        .video-container {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            background: #000;
            margin: 0 auto 20px;
        }
        
        iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .status {
            display: inline-block;
            background-color: #ff0000;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            margin-bottom: 10px;
        }
        
        .bypass-container {
            display: none;
        }
    </style>
    <!-- Añadir cabecera para bypass de ngrok -->
    <meta http-equiv="ngrok-skip-browser-warning" content="1">
</head>
<body>
    <div class="logo">FutbolFree</div>
    
    <!-- Iframe bypass oculto para manejar la advertencia de ngrok -->
    <div class="bypass-container">
        <iframe id="bypassFrame" style="width:1px;height:1px;position:absolute;top:-100px;visibility:hidden"></iframe>
    </div>
    
    <div class="video-container">
        <iframe id="liveStream" 
                src="about:blank" 
                allowfullscreen="true" 
                allow="autoplay; fullscreen" 
                scrolling="no">
        </iframe>
    </div>
    
    <div>
        <span class="status">EN VIVO</span>
        <h3>Transmisión en Vivo</h3>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const streamUrl = "https://5989-38-172-130-234.ngrok-free.app/embed/video?autoplay=true&muted=false&pip=false";
            const iframe = document.getElementById('liveStream');
            const bypassFrame = document.getElementById('bypassFrame');
            
            // Función para intentar bypass de ngrok
            function bypassNgrok() {
                // Configurar cabeceras para evitar la advertencia
                const bypassUrl = streamUrl + "&ngrok-skip-browser-warning=1&_=" + Date.now();
                
                // Cargar primero en el iframe de bypass
                bypassFrame.src = bypassUrl;
                
                // Intentar cargar en la ventana principal también
                try {
                    fetch(bypassUrl, {
                        method: 'GET',
                        headers: {
                            'ngrok-skip-browser-warning': '1'
                        },
                        mode: 'no-cors'
                    }).catch(function(error) {
                        console.log('Solicitud bypass enviada');
                    });
                } catch (e) {
                    console.log('Error en bypass:', e);
                }
                
                // Esperar un momento y luego cargar el stream real con parámetros de bypass
                setTimeout(function() {
                    const finalUrl = streamUrl + "&ngrok-skip-browser-warning=1&_=" + Date.now();
                    iframe.src = finalUrl;
                    
                    // Intentar presionar automáticamente el botón "Visit Site" si aparece
                    iframe.onload = function() {
                        try {
                            // Intentar hacer clic en el botón de "Visit Site" dentro del iframe
                            const checkForButton = setInterval(function() {
                                try {
                                    let iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                                    let buttons = iframeDoc.querySelectorAll('a, button');
                                    
                                    for (let i = 0; i < buttons.length; i++) {
                                        if (buttons[i].textContent && buttons[i].textContent.includes('Visit Site')) {
                                            buttons[i].click();
                                            console.log('Botón de ngrok clickeado');
                                            clearInterval(checkForButton);
                                            break;
                                        }
                                    }
                                } catch (e) {
                                    // Error esperado por CORS
                                }
                            }, 500);
                            
                            // Detener después de varios intentos
                            setTimeout(function() {
                                clearInterval(checkForButton);
                            }, 5000);
                            
                        } catch (e) {
                            console.log('Error al intentar acceder al contenido del iframe:', e);
                        }
                    };
                }, 1000);
            }
            
            // Ejecutar bypass de ngrok
            bypassNgrok();
            
            // Si después de 8 segundos el usuario ve la pantalla en blanco, recargar con otro método
            setTimeout(function() {
                if (confirm("¿No ves el video? Haz clic en Aceptar para intentar otro método")) {
                    window.open(streamUrl, '_blank');
                    setTimeout(function() {
                        location.reload();
                    }, 2000);
                }
            }, 8000);
        });
    </script>
</body>
</html>
